# Kamal 2.x secrets configuration
# Secrets are available under: registry/password, env/secret, builder/secrets, accessories/*/env/secret
# Requires: OP_SERVICE_ACCOUNT_TOKEN environment variable set

# 1Password secrets (from Deploy Secrets vault)
KAMAL_REGISTRY_PASSWORD=$(op read "op://Deploy Secrets/Production/KAMAL_REGISTRY_PASSWORD")

# Rails master key (never commit config/master.key to git!)
RAILS_MASTER_KEY=$(cat config/master.key)

# PostgreSQL password from 1Password or environment
# Add POSTGRES_PASSWORD to 1Password Production item for production use
POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-$(op read "op://Deploy Secrets/Production/POSTGRES_PASSWORD" 2>/dev/null || echo "postgres")}
