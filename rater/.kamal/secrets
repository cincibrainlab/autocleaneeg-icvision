# Kamal 2.x secrets configuration
# Secrets are available under: registry/password, env/secret, builder/secrets, accessories/*/env/secret
# Requires: OP_SERVICE_ACCOUNT_TOKEN environment variable set

# 1Password secrets (from Deploy Secrets vault)
KAMAL_REGISTRY_PASSWORD=$(op read "op://Deploy Secrets/Production/KAMAL_REGISTRY_PASSWORD")

# Rails master key - tries 1Password first, then environment variable
# To deploy: export RAILS_MASTER_KEY=$(cat config/master.key)
RAILS_MASTER_KEY=$(op read "op://Deploy Secrets/Production/RAILS_MASTER_KEY" 2>/dev/null || echo "$RAILS_MASTER_KEY")

# PostgreSQL password from 1Password
POSTGRES_PASSWORD=$(op read "op://Deploy Secrets/Production/POSTGRES_PASSWORD" 2>/dev/null || echo "postgres")
