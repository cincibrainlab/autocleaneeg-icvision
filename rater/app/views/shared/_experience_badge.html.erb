<% if participant.experience_set? %>
  <!-- Collapsed badge showing current level -->
  <div class="flex items-center space-x-2 px-3 py-1.5 bg-gray-700 rounded-full">
    <span class="w-2 h-2 rounded-full <%= experience_color(participant.experience_level) %>"></span>
    <span class="text-sm capitalize"><%= participant.experience_level %></span>
  </div>
<% else %>
  <!-- Pulsing badge prompting to set experience -->
  <div class="relative" data-controller="experience">
    <button
      type="button"
      class="flex items-center space-x-2 px-3 py-1.5 bg-yellow-600 hover:bg-yellow-500 rounded-full animate-pulse transition-colors"
      data-action="click->experience#toggle"
    >
      <span class="text-sm font-medium">Set Experience Level</span>
    </button>

    <!-- Dropdown -->
    <div
      class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg border border-gray-700 hidden"
      data-experience-target="dropdown"
    >
      <div class="p-2">
        <p class="text-xs text-gray-400 mb-2 px-2">How experienced are you with ICA classification?</p>
        <% Participant::EXPERIENCE_LEVELS.each do |level| %>
          <%= button_to update_experience_path, method: :patch, params: { experience_level: level }, class: "w-full text-left px-3 py-2 rounded hover:bg-gray-700 capitalize transition-colors", data: { turbo_frame: "_top" } do %>
            <span class="inline-block w-2 h-2 rounded-full mr-2 <%= experience_color(level) %>"></span>
            <%= level %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
